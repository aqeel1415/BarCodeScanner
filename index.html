
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code and Barcode Scanner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>QR Code and Barcode Scanner</h1>
    <video id="video" width="100%" height="100%"></video>
    <canvas id="canvas" style="display: none;"></canvas>
    <div id="result"></div>
    <button id="add-btn" style="display: none;">Add Item</button>

    <script src="https:                                                             
    <script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.18.6/dist/zxing.min.js"></script>
    <script src="script.js"></script>
</body>
    <script>
        let video = document.getElementById('video');
let canvas = document.getElementById('canvas');
let resultDiv = document.getElementById('result');
let addBtn = document.getElementById('add-btn');
let dataset = [
    { id: 1, code: '1234567890128', type: 'barcode' },
    { id: 2, code: '9783161484100', type: 'barcode' },
    { id: 3, code: 'https:                                 
                                    
];
let lastId = dataset.length;
let scanning = false;
let codeReader = new ZXing.BrowserBarcodeReader();

                        
navigator.mediaDevices.getUserMedia({ video: { facingMode: '//example.com', type: 'qrcode' },
    // Add more items to the dataset
];
let lastId = dataset.length;
let scanning = false;
let codeReader = new ZXing.BrowserBarcodeReader();

// Request camera access
navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
    .then(stream => {
        video.srcObject = stream;
        video.play();
        scanning = true;
        scanCode();
    })
    .catch(error => {
        console.error('Error accessing camera:', error);
    });

            
function scanCode() {
    if (scanning) {
                              
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        let ctx = canvas.getContext('// Scan code
function scanCode() {
    if (scanning) {
        // Try to scan QR code
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        let ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        let qrCode = jsQR(imageData.data, imageData.width, imageData.height);
        if (qrCode) {
            let scannedValue = qrCode.data;
            let item = dataset.find(item => item.code === scannedValue && item.type === 'qrcode');
            if (item) {
                resultDiv.textContent = `Item ID: ${item.id}`;
                addBtn.style.display = 'none';
            } else {
                resultDiv.textContent = `Item not found.`;
                addBtn.style.display = 'block';
                addBtn.onclick = () => {
                    lastId++;
                    dataset.push({ id: lastId, code: scannedValue, type: 'qrcode' });
                    resultDiv.textContent = `Item ID: ${lastId}`;
                    addBtn.style.display = 'none';
                };
            }
        } else {
                                  
            codeReader.decodeFromVideoDevice(null, '// Try to scan barcode
            codeReader.decodeFromVideoDevice(null, 'video', (result, err) => {
                if (result) {
                    let scannedValue = result.text;
                    let item = dataset.find(item => item.code === scannedValue && item.type === 'barcode');
                    if (item) {
                        resultDiv.textContent = `Item ID: ${item.id}`;
                        addBtn.style.display = 'none';
                    } else {
                        resultDiv.textContent = `Item not found.`;
                        addBtn.style.display = 'block';
                        addBtn.onclick = () => {
                            lastId++;
                            dataset.push({ id: lastId, code: scannedValue, type: 'barcode' });
                            resultDiv.textContent = `Item ID: ${lastId}`;
                            addBtn.style.display = 'none';
                        };
                    }
                }
                if (err) {
                    console.error('Error scanning code:', err);
                }
            });
        }
        requestAnimationFrame(scanCode);
    }
}
    </script>
</html>
